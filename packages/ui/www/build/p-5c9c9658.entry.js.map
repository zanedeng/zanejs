{"version":3,"names":["notificationManagerCss","getNotificationIndex","counter","NotificationManager","constructor","hostRef","this","gid","getComponentIndex","isDarkMode","name","notifications","position","componentWillLoad","observeThemeChange","listenNotification","evt","detail","target","procced","preventDefault","stopPropagation","notification","action","dismissible","hide","id","state","subtitle","timeout","title","width","concat","filter","n","callback","setTimeout","listenNotificationDismiss","includes","forEach","render","h","Host","key","class","map","hidden","renderNotification","managed","style","innerHTML","DOMPurify.sanitize","slot"],"sources":["src/components/notification-manager/notification-manager.scss?tag=zane-notification-manager&encapsulation=shadow","src/components/notification-manager/notification-manager.tsx"],"sourcesContent":["@use \"../../global/styles/commons\";\n\n@keyframes revealTop {\n  0% {\n    opacity: 0;\n    transform: translateY(-1rem);\n    max-height: 0;\n  }\n  100% {\n    max-height: 500px;\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes revealBottom {\n  0% {\n    opacity: 0;\n    transform: translateY(1rem);\n    max-height: 0;\n  }\n  100% {\n    max-height: 500px;\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n\n:host {\n  display: block;\n  position: absolute;\n  z-index: var(--z-index-notification-manager);\n  pointer-events: none;\n}\n\n:host([name='global']) {\n  position: fixed;\n  width: 300px;\n}\n\n.notification-manager {\n  pointer-events: none;\n  display: flex;\n  flex-direction: column;\n  margin: var(--spacing-04);\n\n  .notification {\n    pointer-events: auto;\n    height: auto;\n    max-height: 500px;\n    transition: all 0.5s ease-out;\n  }\n\n  .notification.hidden {\n    max-height: 0;\n    opacity: 0;\n    overflow: hidden;\n  }\n}\n\n:host([position=\"bottom-right\"]) {\n  bottom: 0;\n  right: 0;\n\n  .notification {\n    animation: revealBottom 0.5s ease-in;\n  }\n  .notification-manager {\n    align-items: flex-end;\n  }\n}\n\n:host([position=\"bottom-left\"]) {\n  bottom: 0;\n  left: 0;\n\n  .notification {\n    animation: revealBottom 0.5s ease-in;\n  }\n  .notification-manager {\n    align-items: flex-start;\n  }\n}\n\n:host([position=\"top-left\"]) {\n  top: 0;\n  left: 0;\n\n  .notification {\n    animation: revealTop 0.5s ease-in;\n  }\n  .notification-manager {\n    align-items: flex-start;\n  }\n}\n\n:host([position=\"top-right\"]) {\n  top: 0;\n  right: 0;\n\n  .notification {\n    animation: revealTop 0.5s ease-in;\n  }\n  .notification-manager {\n    align-items: flex-end;\n  }\n}\n","import {\n  Component,\n  ComponentInterface,\n  Element,\n  h,\n  Host,\n  Listen,\n  Prop,\n  State,\n} from '@stencil/core';\nimport * as DOMPurify from 'dompurify';\n\nimport { getComponentIndex, isDarkMode, observeThemeChange } from '../../utils';\n\nconst getNotificationIndex = (() => {\n  let counter = 1;\n  return function () {\n    return `${counter++}`;\n  };\n})();\n\ntype Notification = {\n  action?: string;\n  dismissible: boolean;\n  hide: boolean;\n  id: string;\n  state: string;\n  subtitle?: string;\n  timeout: number;\n  title: string;\n  width?: string;\n};\n\n/**\n * @name Notification Manager\n * @description The Notification Manager handles the organization and display of notifications within the application.\n * @category Informational\n * @tags notification\n * @img /assets/img/notification-manager.webp\n * @imgDark /assets/img/notification-manager-dark.webp\n */\n@Component({\n  shadow: true,\n  styleUrl: 'notification-manager.scss',\n  tag: 'zane-notification-manager',\n})\nexport class NotificationManager implements ComponentInterface {\n  @Element() elm!: HTMLElement;\n\n  gid: string = getComponentIndex();\n\n  @State() isDarkMode: boolean = isDarkMode();\n  @Prop({ reflect: true }) name: string = 'global';\n\n  @State() notifications: any = [];\n  @Prop({ reflect: true }) position:\n    | 'bottom-left'\n    | 'bottom-right'\n    | 'top-left'\n    | 'top-right' = 'bottom-right';\n\n  componentWillLoad() {\n    observeThemeChange(() => {\n      this.isDarkMode = isDarkMode();\n    });\n  }\n\n  @Listen('zane-notification', { target: 'window' })\n  listenNotification(evt: CustomEvent) {\n    if (\n      (evt.detail.target === this.name || this.name === 'global') &&\n      !evt.detail.procced\n    ) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      evt.detail.procced = true;\n      const notification: Notification = {\n        action: evt.detail.action,\n        dismissible: evt.detail.dismissible,\n\n        hide: false,\n        id: `notification-${this.gid}-${getNotificationIndex()}`,\n        state: evt.detail.state,\n        subtitle: evt.detail.subtitle,\n        timeout: evt.detail.timeout,\n        title: evt.detail.title,\n        width: evt.detail.width,\n      };\n      this.notifications = this.notifications\n        .concat([notification])\n        .filter((n) => !n.hide);\n\n      if (evt.detail.callback) {\n        evt.detail.callback(notification.id);\n      }\n\n      if (!notification.dismissible)\n        setTimeout(() => {\n          notification.hide = true;\n          this.notifications = [...this.notifications];\n        }, notification.timeout || 5000);\n    }\n  }\n\n  @Listen('zane-notification-dismiss', { target: 'window' })\n  listenNotificationDismiss(evt: CustomEvent) {\n    const notifications = this.notifications.filter((n) =>\n      evt.detail.notifications.includes(n.id),\n    );\n    notifications.forEach((n) => (n.hide = true));\n    this.notifications = [...this.notifications];\n  }\n\n  render() {\n    return (\n      <Host>\n        <div\n          class={{\n            [`position-${this.position}`]: true,\n            'notification-manager': true,\n          }}\n        >\n          {this.notifications.map((notification) => (\n            <div\n              class={{ hidden: notification.hide, notification: true }}\n              id={notification.id}\n            >\n              {this.renderNotification(notification)}\n            </div>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n\n  renderNotification(notification) {\n    return (\n      <zane-notification\n        action={notification.action}\n        dismissible={notification.dismissible}\n        managed={true}\n        onZane-notification--dismiss={() => {\n          notification.hide = true;\n          this.notifications = [...this.notifications];\n        }}\n        state={notification.state}\n        style={{ width: notification.width }}\n      >\n        <div innerHTML={DOMPurify.sanitize(notification.title)} slot=\"title\" />\n        <div\n          innerHTML={DOMPurify.sanitize(notification.subtitle)}\n          slot=\"subtitle\"\n        />\n      </zane-notification>\n    );\n  }\n}\n"],"mappings":"gNAAA,MAAMA,EAAyB,wyHCc/B,MAAMC,EAAuB,MAC3B,IAAIC,EAAU,EACd,OAAO,WACL,MAAO,GAAGA,KACZ,CACD,EAL4B,G,MAgChBC,EAAmB,MALhC,WAAAC,CAAAC,G,UAQEC,KAAGC,IAAWC,IAELF,KAAUG,WAAYA,IACNH,KAAII,KAAW,SAE/BJ,KAAaK,cAAQ,GACLL,KAAQM,SAIf,cAiGnB,CA/FC,iBAAAC,GACEC,GAAmB,KACjBR,KAAKG,WAAaA,GAAY,G,CAKlC,kBAAAM,CAAmBC,GACjB,IACGA,EAAIC,OAAOC,SAAWZ,KAAKI,MAAQJ,KAAKI,OAAS,YACjDM,EAAIC,OAAOE,QACZ,CACAH,EAAII,iBACJJ,EAAIK,kBACJL,EAAIC,OAAOE,QAAU,KACrB,MAAMG,EAA6B,CACjCC,OAAQP,EAAIC,OAAOM,OACnBC,YAAaR,EAAIC,OAAOO,YAExBC,KAAM,MACNC,GAAI,gBAAgBpB,KAAKC,OAAON,MAChC0B,MAAOX,EAAIC,OAAOU,MAClBC,SAAUZ,EAAIC,OAAOW,SACrBC,QAASb,EAAIC,OAAOY,QACpBC,MAAOd,EAAIC,OAAOa,MAClBC,MAAOf,EAAIC,OAAOc,OAEpBzB,KAAKK,cAAgBL,KAAKK,cACvBqB,OAAO,CAACV,IACRW,QAAQC,IAAOA,EAAET,OAEpB,GAAIT,EAAIC,OAAOkB,SAAU,CACvBnB,EAAIC,OAAOkB,SAASb,EAAaI,G,CAGnC,IAAKJ,EAAaE,YAChBY,YAAW,KACTd,EAAaG,KAAO,KACpBnB,KAAKK,cAAgB,IAAIL,KAAKK,cAAc,GAC3CW,EAAaO,SAAW,I,EAKjC,yBAAAQ,CAA0BrB,GACxB,MAAML,EAAgBL,KAAKK,cAAcsB,QAAQC,GAC/ClB,EAAIC,OAAON,cAAc2B,SAASJ,EAAER,MAEtCf,EAAc4B,SAASL,GAAOA,EAAET,KAAO,OACvCnB,KAAKK,cAAgB,IAAIL,KAAKK,c,CAGhC,MAAA6B,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,OAAAE,IAAA,2CACEC,MAAO,CACL,CAAC,YAAYtC,KAAKM,YAAa,KAC/B,uBAAwB,OAGzBN,KAAKK,cAAckC,KAAKvB,GACvBmB,EAAA,OACEG,MAAO,CAAEE,OAAQxB,EAAaG,KAAMH,aAAc,MAClDI,GAAIJ,EAAaI,IAEhBpB,KAAKyC,mBAAmBzB,O,CAQrC,kBAAAyB,CAAmBzB,GACjB,OACEmB,EACE,qBAAAlB,OAAQD,EAAaC,OACrBC,YAAaF,EAAaE,YAC1BwB,QAAS,KAAI,+BACiB,KAC5B1B,EAAaG,KAAO,KACpBnB,KAAKK,cAAgB,IAAIL,KAAKK,cAAc,EAE9CgB,MAAOL,EAAaK,MACpBsB,MAAO,CAAElB,MAAOT,EAAaS,QAE7BU,EAAA,OAAKS,UAAWC,UAAmB7B,EAAaQ,OAAQsB,KAAK,UAC7DX,EAAA,OACES,UAAWC,UAAmB7B,EAAaM,UAC3CwB,KAAK,a","ignoreList":[]}