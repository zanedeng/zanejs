{"version":3,"file":"zane-notification-manager.entry.esm.js","sources":["src/components/notification-manager/notification-manager.scss?tag=zane-notification-manager&encapsulation=shadow","src/components/notification-manager/notification-manager.tsx"],"sourcesContent":["@use '../../global/styles/commons';\n\n@keyframes revealTop {\n  0% {\n    max-height: 0;\n    opacity: 0;\n    transform: translateY(-1rem);\n  }\n\n  100% {\n    max-height: 500px;\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes revealBottom {\n  0% {\n    max-height: 0;\n    opacity: 0;\n    transform: translateY(1rem);\n  }\n\n  100% {\n    max-height: 500px;\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n:host {\n  position: absolute;\n  z-index: var(--z-index-notification-manager);\n  display: block;\n  pointer-events: none;\n}\n\n:host([name='global']) {\n  position: fixed;\n  width: 300px;\n}\n\n.notification-manager {\n  display: flex;\n  flex-direction: column;\n  margin: var(--spacing-04);\n  pointer-events: none;\n\n  .notification {\n    height: auto;\n    max-height: 500px;\n    pointer-events: auto;\n    transition: all 0.5s ease-out;\n  }\n\n  .notification.hidden {\n    max-height: 0;\n    overflow: hidden;\n    opacity: 0;\n  }\n}\n\n:host([position='bottom-right']) {\n  right: 0;\n  bottom: 0;\n\n  .notification {\n    animation: revealBottom 0.5s ease-in;\n  }\n\n  .notification-manager {\n    align-items: flex-end;\n  }\n}\n\n:host([position='bottom-left']) {\n  bottom: 0;\n  left: 0;\n\n  .notification {\n    animation: revealBottom 0.5s ease-in;\n  }\n\n  .notification-manager {\n    align-items: flex-start;\n  }\n}\n\n:host([position='top-left']) {\n  top: 0;\n  left: 0;\n\n  .notification {\n    animation: revealTop 0.5s ease-in;\n  }\n\n  .notification-manager {\n    align-items: flex-start;\n  }\n}\n\n:host([position='top-right']) {\n  top: 0;\n  right: 0;\n\n  .notification {\n    animation: revealTop 0.5s ease-in;\n  }\n\n  .notification-manager {\n    align-items: flex-end;\n  }\n}\n","import {\n  Component,\n  ComponentInterface,\n  Element,\n  h,\n  Host,\n  Listen,\n  Prop,\n  State,\n} from '@stencil/core';\nimport * as DOMPurify from 'dompurify';\n\nimport { getComponentIndex, isDarkMode, observeThemeChange } from '../../utils';\n\nconst getNotificationIndex = (() => {\n  let counter = 1;\n  return function () {\n    return `${counter++}`;\n  };\n})();\n\ntype Notification = {\n  action?: string;\n  dismissible: boolean;\n  hide: boolean;\n  id: string;\n  state: string;\n  subtitle?: string;\n  timeout: number;\n  title: string;\n  width?: string;\n};\n\n/**\n * @name Notification Manager\n * @description The Notification Manager handles the organization and display of notifications within the application.\n * @category Informational\n * @tags notification\n * @img /assets/img/notification-manager.webp\n * @imgDark /assets/img/notification-manager-dark.webp\n */\n@Component({\n  shadow: true,\n  styleUrl: 'notification-manager.scss',\n  tag: 'zane-notification-manager',\n})\nexport class NotificationManager implements ComponentInterface {\n  @Element() elm!: HTMLElement;\n\n  gid: string = getComponentIndex();\n\n  @State() isDarkMode: boolean = isDarkMode();\n  @Prop({ reflect: true }) name: string = 'global';\n\n  @State() notifications: any = [];\n  @Prop({ reflect: true }) position:\n    | 'bottom-left'\n    | 'bottom-right'\n    | 'top-left'\n    | 'top-right' = 'bottom-right';\n\n  componentWillLoad() {\n    observeThemeChange(() => {\n      this.isDarkMode = isDarkMode();\n    });\n  }\n\n  @Listen('zane-notification', { target: 'window' })\n  listenNotification(evt: CustomEvent) {\n    if (\n      (evt.detail.target === this.name || this.name === 'global') &&\n      !evt.detail.procced\n    ) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      evt.detail.procced = true;\n      const notification: Notification = {\n        action: evt.detail.action,\n        dismissible: evt.detail.dismissible,\n\n        hide: false,\n        id: `notification-${this.gid}-${getNotificationIndex()}`,\n        state: evt.detail.state,\n        subtitle: evt.detail.subtitle,\n        timeout: evt.detail.timeout,\n        title: evt.detail.title,\n        width: evt.detail.width,\n      };\n      this.notifications = this.notifications\n        .concat([notification])\n        .filter((n) => !n.hide);\n\n      if (evt.detail.callback) {\n        evt.detail.callback(notification.id);\n      }\n\n      if (!notification.dismissible)\n        setTimeout(() => {\n          notification.hide = true;\n          this.notifications = [...this.notifications];\n        }, notification.timeout || 5000);\n    }\n  }\n\n  @Listen('zane-notification-dismiss', { target: 'window' })\n  listenNotificationDismiss(evt: CustomEvent) {\n    const notifications = this.notifications.filter((n) =>\n      evt.detail.notifications.includes(n.id),\n    );\n    notifications.forEach((n) => (n.hide = true));\n    this.notifications = [...this.notifications];\n  }\n\n  render() {\n    return (\n      <Host>\n        <div\n          class={{\n            [`position-${this.position}`]: true,\n            'notification-manager': true,\n          }}\n        >\n          {this.notifications.map((notification) => (\n            <div\n              class={{ hidden: notification.hide, notification: true }}\n              id={notification.id}\n            >\n              {this.renderNotification(notification)}\n            </div>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n\n  renderNotification(notification) {\n    return (\n      <zane-notification\n        action={notification.action}\n        dismissible={notification.dismissible}\n        managed={true}\n        onZane-notification--dismiss={() => {\n          notification.hide = true;\n          this.notifications = [...this.notifications];\n        }}\n        state={notification.state}\n        style={{ width: notification.width }}\n      >\n        <div innerHTML={DOMPurify.sanitize(notification.title)} slot=\"title\" />\n        <div\n          innerHTML={DOMPurify.sanitize(notification.subtitle)}\n          slot=\"subtitle\"\n        />\n      </zane-notification>\n    );\n  }\n}\n"],"names":["DOMPurify.sanitize"],"mappings":"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"}