{"version":3,"names":["inputNumberCss","InputNumber","constructor","hostRef","this","gid","getComponentIndex","autocomplete","configAria","debounce","disabled","hideActions","inline","invalid","name","readonly","required","size","skeleton","state","value","warn","hasFocus","endSlotHasContent","startSlotHasContent","passwordVisible","blurHandler","ev","zaneBlur","emit","focusHandler","zaneFocus","inputHandler","input","target","oldValue","undefined","JSON","parse","zaneInput","zaneChange","componentWillLoad","elm","hasAttribute","tabindex","getAttribute","removeAttribute","getAttributeNames","forEach","includes","querySelector","connectedCallback","debounceChanged","getComponentId","getLabel","h","class","label","render","Host","key","hasValue","renderInput","renderHelper","invalidText","warnText","helperText","Object","assign","autoComplete","onBlur","onFocus","onInput","placeholder","readOnly","ref","nativeElement","tabIndex","type","color","icon","evt","decrease","variant","increment","setBlur","blur","setFocus","focus","debounceEvent","getValue","toString","length"],"sources":["src/components/input-number/input-number.scss?tag=zane-number&encapsulation=shadow","src/components/input-number/input-number.tsx"],"sourcesContent":["@use '../../global/styles/common-input';\n","import type { InputComponentInterface } from '../../interfaces';\n\nimport {\n  Component,\n  ComponentInterface,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\n\nimport { debounceEvent, getComponentIndex } from '../../utils';\n\n/**\n * 数字输入框组件 zane-number\n *\n * 核心功能：\n * 1. 支持数字输入及增减按钮控制\n * 2. 提供四种状态反馈（默认/成功/警告/错误）\n * 3. 表单验证支持（必填/禁用/只读）\n * 4. 防抖事件处理与无障碍访问优化\n * 5. 插槽扩展能力（前后扩展区域）\n *\n * @implements {ComponentInterface}\n * @implements {InputComponentInterface}\n * @part input - 原生输入框元素（可通过::part CSS定制）\n */\n@Component({\n  shadow: true,\n  styleUrl: 'input-number.scss',\n  tag: 'zane-number',\n})\nexport class InputNumber\n  implements ComponentInterface, InputComponentInterface\n{\n\n  gid: string = getComponentIndex();\n\n  @Element() elm!: HTMLElement;\n\n  /**\n   * 自动填充控制\n   * - `on`: 允许浏览器自动填充\n   * - `off`: 禁用自动填充\n   * @default 'off'\n   */\n  @Prop() autocomplete: 'off' | 'on' = 'off';\n\n  @Prop({ mutable: true, reflect: true }) configAria: any = {};\n\n  /**\n   * 防抖延迟(ms)\n   * - 控制 zane-number--change 事件触发频率\n   * @default 300\n   */\n  @Prop() debounce = 300;\n\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  @Prop() helperText: string;\n\n  /**\n * 操作按钮可见性控制\n  * - true: 隐藏增减按钮\n  * - false: 显示（默认）\n  * @attr\n  */\n  @Prop({ reflect: true }) hideActions: boolean = false;\n\n  @Prop({ reflect: true }) inline: boolean = false;\n\n  @Prop() invalid: boolean = false;\n\n  @Prop() invalidText: string;\n\n  @Prop() label: string;\n\n  @Prop() name: string = `zane-input-${this.gid}`;\n\n  @Prop() placeholder: string;\n\n  @Prop({ reflect: true }) readonly: boolean = false;\n\n  @Prop({ reflect: true }) required: boolean = false;\n\n  /**\n   * 尺寸规格\n   * - `sm`: 小尺寸(高度约32px)\n   * - `md`: 中尺寸(高度约40px)\n   * - `lg`: 大尺寸(高度约48px)\n   * @attr\n   * @default 'md'\n   */\n  @Prop({ reflect: true }) size: 'lg' | 'md' | 'sm' = 'md';\n\n  @Prop() skeleton: boolean = false;\n\n  /**\n   * 组件状态标识\n   * - `default`: 默认状态（无特殊样式）\n   * - `success`: 成功状态（通常用绿色标识）\n   * - `warning`: 警告状态（通常用橙色标识）\n   * - `error`: 错误状态（通常用红色标识）\n   * @attr\n   * @default 'default'\n   */\n  @Prop({ reflect: true }) state: 'default' | 'error' | 'success' | 'warning' =\n    'default';\n\n  /**\n   * 输入值（数字类型）\n   * - 支持 null 表示空值\n   * - 使用 mutable 实现双向绑定\n   * @example <zane-number value={5} />\n   */\n  @Prop({ mutable: true }) value?: null | number = null;\n\n  @Prop() warn: boolean = false;\n\n  @Prop() warnText: string;\n\n  @State() hasFocus = false;\n\n  @State() endSlotHasContent = false;\n\n  @State() startSlotHasContent = false;\n\n  @State() passwordVisible = false;\n\n  /**\n   * 失去焦点事件\n   * @event zane-number--blur\n   * @param {FocusEvent} ev - 焦点事件对象\n   */\n  @Event({ eventName: 'zane-number--blur' }) zaneBlur: EventEmitter;\n\n  /**\n   * 数字变化事件（防抖处理）\n   * @event zane-number--change\n   * @param {KeyboardEvent} ev - 键盘事件对象\n   * @property {number} value - 当前输入值\n   */\n  @Event({ eventName: 'zane-number--change' }) zaneChange: EventEmitter;\n\n  /**\n   * 获得焦点事件\n   * @event zane-number--focus\n   * @param {FocusEvent} ev - 焦点事件对象\n   */\n  @Event({ eventName: 'zane-number--focus' }) zaneFocus: EventEmitter;\n\n  /**\n   * 实时输入事件\n   * @event zane-number--input\n   * @param {KeyboardEvent} ev - 原始输入事件\n   */\n  @Event({ eventName: 'zane-number--input' }) zaneInput: EventEmitter;\n  private nativeElement?: HTMLInputElement;\n  private tabindex?: number | string;\n\n  componentWillLoad() {\n    if (this.elm.hasAttribute('tabindex')) {\n      const tabindex = this.elm.getAttribute('tabindex');\n      this.tabindex = tabindex === null ? undefined : tabindex;\n      this.elm.removeAttribute('tabindex');\n    }\n    this.elm.getAttributeNames().forEach((name: string) => {\n      if (name.includes('aria-')) {\n        this.configAria[name] = this.elm.getAttribute(name);\n        this.elm.removeAttribute(name);\n      }\n    });\n    this.startSlotHasContent = !!this.elm.querySelector('[slot=\"start\"]');\n    this.endSlotHasContent = !!this.elm.querySelector('[slot=\"end\"]');\n  }\n\n  connectedCallback() {\n    this.debounceChanged();\n  }\n\n  /**\n   * 获取组件全局唯一标识\n   * @returns {string} 组件ID\n   */\n  @Method()\n  async getComponentId() {\n    return this.gid;\n  }\n\n  getLabel() {\n    return this.skeleton ? (\n      <div class=\"label skeleton\" />\n    ) : (\n      <label class=\"label\">\n        {this.required && <span class=\"required\">*</span>}\n        {this.label}\n      </label>\n    );\n  }\n\n  render() {\n    return (\n      <Host\n        has-focus={this.hasFocus}\n        has-value={this.hasValue()}\n        invalid={this.invalid}\n        warn={this.warn}\n      >\n        <div class={{ 'form-control': true, inline: this.inline }}>\n          {this.label && this.getLabel()}\n          <div class=\"field\">\n            {this.skeleton ? (\n              <div class=\"input-container-skeleton\" />\n            ) : (\n              this.renderInput()\n            )}\n          </div>\n          {this.renderHelper()}\n        </div>\n      </Host>\n    );\n  }\n\n  renderHelper() {\n    if (this.invalid)\n      return <div class=\"helper invalid\">{this.invalidText}</div>;\n    else if (this.warn) return <div class=\"helper warn\">{this.warnText}</div>;\n    else if (this.helperText || this.helperText === '')\n      return <div class=\"helper text\">{this.helperText}</div>;\n  }\n\n  renderInput() {\n    return (\n      <div\n        class={{\n          disabled: this.disabled,\n          'end-slot-has-content': this.endSlotHasContent,\n          'has-focus': this.hasFocus,\n          'input-container': true,\n          'start-slot-has-content': this.startSlotHasContent,\n        }}\n      >\n        <div class=\"slot-container start\">\n          <slot name=\"start\" />\n        </div>\n\n        <input\n          autoComplete={this.autocomplete}\n          class=\"input input-native\"\n          disabled={this.disabled}\n          name={this.name}\n          onBlur={this.blurHandler}\n          onFocus={this.focusHandler}\n          onInput={this.inputHandler}\n          placeholder={this.placeholder}\n          readOnly={this.readonly}\n          ref={(input) => (this.nativeElement = input)}\n          required={this.required}\n          tabIndex={this.tabindex}\n          type=\"number\"\n          value={this.value}\n          {...this.configAria}\n        />\n\n        {!this.readonly && !this.disabled && !this.hideActions && (\n          <zane-button\n            aria-label=\"Decrease\"\n            class=\"input-action\"\n            color={'secondary'}\n            icon=\"subtract\"\n            onGoat-button--click={(evt) => {\n              this.decrease(evt);\n            }}\n            size={this.size}\n            variant=\"ghost.simple\"\n          ></zane-button>\n        )}\n\n        {!this.readonly && !this.disabled && !this.hideActions && (\n          <zane-button\n            class=\"input-action\"\n            color={'secondary'}\n            icon=\"add\"\n            onGoat-button--click={(evt) => {\n              this.increment(evt);\n            }}\n            size={this.size}\n            variant=\"ghost.simple\"\n          ></zane-button>\n        )}\n\n        <div class=\"slot-container end\">\n          <slot name=\"end\" />\n        </div>\n      </div>\n    );\n  }\n\n  @Method()\n  async setBlur() {\n    if (this.nativeElement) {\n      this.nativeElement.blur();\n      this.hasFocus = false;\n    }\n  }\n\n  @Method()\n  async setFocus() {\n    if (this.nativeElement) {\n      this.nativeElement.focus();\n      this.hasFocus = true;\n    }\n  }\n\n  @Watch('debounce')\n  protected debounceChanged() {\n    this.zaneChange = debounceEvent(this.zaneChange, this.debounce);\n  }\n\n  private blurHandler = (ev: FocusEvent) => {\n    this.hasFocus = false;\n    this.zaneBlur.emit(ev);\n  };\n\n  /**\n   * 数字递减操作\n   * @param {Event} ev - 触发事件对象\n   */\n  private decrease(ev) {\n    if (this.value === undefined || this.value === null) this.value = 0;\n    if (typeof this.value === 'number') {\n      this.value = (this.value || 0) - 1;\n      this.zaneChange.emit(ev);\n    }\n  }\n\n  private focusHandler = (ev: FocusEvent) => {\n    this.hasFocus = true;\n    this.zaneFocus.emit(ev);\n  };\n\n  private getValue(): string {\n    return (this.value || '').toString();\n  }\n\n  private hasValue(): boolean {\n    return this.getValue().length > 0;\n  }\n\n  /**\n   * 数字递增操作\n   * @param {Event} ev - 触发事件对象\n   */\n  private increment(ev) {\n    if (this.value === undefined || this.value === null) this.value = 0;\n    if (typeof this.value === 'number') {\n      this.value = (this.value || 0) + 1;\n      this.zaneChange.emit(ev);\n    }\n  }\n  private inputHandler = (ev: Event) => {\n    const input = ev.target as HTMLInputElement | null;\n    const oldValue = this.value;\n    if (input) {\n      this.value =\n        input.value === '' || input.value === undefined\n          ? null\n          : JSON.parse(input.value);\n    }\n    this.zaneInput.emit(ev as KeyboardEvent);\n    if (oldValue !== this.value) {\n      this.zaneChange.emit(ev as KeyboardEvent);\n    }\n  };\n}\n"],"mappings":"wLAAA,MAAMA,EAAiB,yyQ,MCqCVC,EAAW,MALxB,WAAAC,CAAAC,G,0LASEC,KAAGC,IAAWC,IAUNF,KAAYG,aAAiB,MAEGH,KAAUI,WAAQ,GAOlDJ,KAAQK,SAAG,IAEML,KAAQM,SAAY,MAUpBN,KAAWO,YAAY,MAEvBP,KAAMQ,OAAY,MAEnCR,KAAOS,QAAY,MAMnBT,KAAAU,KAAe,cAAcV,KAAKC,MAIjBD,KAAQW,SAAY,MAEpBX,KAAQY,SAAY,MAUpBZ,KAAIa,KAAuB,KAE5Cb,KAAQc,SAAY,MAWHd,KAAKe,MAC5B,UAQuBf,KAAKgB,MAAmB,KAEzChB,KAAIiB,KAAY,MAIfjB,KAAQkB,SAAG,MAEXlB,KAAiBmB,kBAAG,MAEpBnB,KAAmBoB,oBAAG,MAEtBpB,KAAeqB,gBAAG,MAgMnBrB,KAAAsB,YAAeC,IACrBvB,KAAKkB,SAAW,MAChBlB,KAAKwB,SAASC,KAAKF,EAAG,EAehBvB,KAAA0B,aAAgBH,IACtBvB,KAAKkB,SAAW,KAChBlB,KAAK2B,UAAUF,KAAKF,EAAG,EAsBjBvB,KAAA4B,aAAgBL,IACtB,MAAMM,EAAQN,EAAGO,OACjB,MAAMC,EAAW/B,KAAKgB,MACtB,GAAIa,EAAO,CACT7B,KAAKgB,MACHa,EAAMb,QAAU,IAAMa,EAAMb,QAAUgB,UAClC,KACAC,KAAKC,MAAML,EAAMb,M,CAEzBhB,KAAKmC,UAAUV,KAAKF,GACpB,GAAIQ,IAAa/B,KAAKgB,MAAO,CAC3BhB,KAAKoC,WAAWX,KAAKF,E,EAG1B,CAtNC,iBAAAc,GACE,GAAIrC,KAAKsC,IAAIC,aAAa,YAAa,CACrC,MAAMC,EAAWxC,KAAKsC,IAAIG,aAAa,YACvCzC,KAAKwC,SAAWA,IAAa,KAAOR,UAAYQ,EAChDxC,KAAKsC,IAAII,gBAAgB,W,CAE3B1C,KAAKsC,IAAIK,oBAAoBC,SAASlC,IACpC,GAAIA,EAAKmC,SAAS,SAAU,CAC1B7C,KAAKI,WAAWM,GAAQV,KAAKsC,IAAIG,aAAa/B,GAC9CV,KAAKsC,IAAII,gBAAgBhC,E,KAG7BV,KAAKoB,sBAAwBpB,KAAKsC,IAAIQ,cAAc,kBACpD9C,KAAKmB,oBAAsBnB,KAAKsC,IAAIQ,cAAc,e,CAGpD,iBAAAC,GACE/C,KAAKgD,iB,CAQP,oBAAMC,GACJ,OAAOjD,KAAKC,G,CAGd,QAAAiD,GACE,OAAOlD,KAAKc,SACVqC,EAAA,OAAKC,MAAM,mBAEXD,EAAO,SAAAC,MAAM,SACVpD,KAAKY,UAAYuC,EAAA,QAAMC,MAAM,YAAmB,KAChDpD,KAAKqD,M,CAKZ,MAAAC,GACE,OACEH,EAACI,EAAI,CAAAC,IAAA,uDACQxD,KAAKkB,SACL,YAAAlB,KAAKyD,WAChBhD,QAAST,KAAKS,QACdQ,KAAMjB,KAAKiB,MAEXkC,EAAA,OAAAK,IAAA,2CAAKJ,MAAO,CAAE,eAAgB,KAAM5C,OAAQR,KAAKQ,SAC9CR,KAAKqD,OAASrD,KAAKkD,WACpBC,EAAK,OAAAK,IAAA,2CAAAJ,MAAM,SACRpD,KAAKc,SACJqC,EAAK,OAAAC,MAAM,6BAEXpD,KAAK0D,eAGR1D,KAAK2D,gB,CAMd,YAAAA,GACE,GAAI3D,KAAKS,QACP,OAAO0C,EAAA,OAAKC,MAAM,kBAAkBpD,KAAK4D,kBACtC,GAAI5D,KAAKiB,KAAM,OAAOkC,EAAA,OAAKC,MAAM,eAAepD,KAAK6D,eACrD,GAAI7D,KAAK8D,YAAc9D,KAAK8D,aAAe,GAC9C,OAAOX,EAAA,OAAKC,MAAM,eAAepD,KAAK8D,W,CAG1C,WAAAJ,GACE,OACEP,EACE,OAAAC,MAAO,CACL9C,SAAUN,KAAKM,SACf,uBAAwBN,KAAKmB,kBAC7B,YAAanB,KAAKkB,SAClB,kBAAmB,KACnB,yBAA0BlB,KAAKoB,sBAGjC+B,EAAK,OAAAC,MAAM,wBACTD,EAAA,QAAMzC,KAAK,WAGbyC,EACE,QAAAY,OAAAC,OAAA,CAAAC,aAAcjE,KAAKG,aACnBiD,MAAM,qBACN9C,SAAUN,KAAKM,SACfI,KAAMV,KAAKU,KACXwD,OAAQlE,KAAKsB,YACb6C,QAASnE,KAAK0B,aACd0C,QAASpE,KAAK4B,aACdyC,YAAarE,KAAKqE,YAClBC,SAAUtE,KAAKW,SACf4D,IAAM1C,GAAW7B,KAAKwE,cAAgB3C,EACtCjB,SAAUZ,KAAKY,SACf6D,SAAUzE,KAAKwC,SACfkC,KAAK,SACL1D,MAAOhB,KAAKgB,OACRhB,KAAKI,cAGTJ,KAAKW,WAAaX,KAAKM,WAAaN,KAAKO,aACzC4C,EAAA,4BACa,WACXC,MAAM,eACNuB,MAAO,YACPC,KAAK,WAAU,uBACQC,IACrB7E,KAAK8E,SAASD,EAAI,EAEpBhE,KAAMb,KAAKa,KACXkE,QAAQ,kBAIV/E,KAAKW,WAAaX,KAAKM,WAAaN,KAAKO,aACzC4C,EACE,eAAAC,MAAM,eACNuB,MAAO,YACPC,KAAK,MAAK,uBACaC,IACrB7E,KAAKgF,UAAUH,EAAI,EAErBhE,KAAMb,KAAKa,KACXkE,QAAQ,iBAIZ5B,EAAK,OAAAC,MAAM,sBACTD,EAAA,QAAMzC,KAAK,S,CAOnB,aAAMuE,GACJ,GAAIjF,KAAKwE,cAAe,CACtBxE,KAAKwE,cAAcU,OACnBlF,KAAKkB,SAAW,K,EAKpB,cAAMiE,GACJ,GAAInF,KAAKwE,cAAe,CACtBxE,KAAKwE,cAAcY,QACnBpF,KAAKkB,SAAW,I,EAKV,eAAA8B,GACRhD,KAAKoC,WAAaiD,EAAcrF,KAAKoC,WAAYpC,KAAKK,S,CAYhD,QAAAyE,CAASvD,GACf,GAAIvB,KAAKgB,QAAUgB,WAAahC,KAAKgB,QAAU,KAAMhB,KAAKgB,MAAQ,EAClE,UAAWhB,KAAKgB,QAAU,SAAU,CAClChB,KAAKgB,OAAShB,KAAKgB,OAAS,GAAK,EACjChB,KAAKoC,WAAWX,KAAKF,E,EASjB,QAAA+D,GACN,OAAQtF,KAAKgB,OAAS,IAAIuE,U,CAGpB,QAAA9B,GACN,OAAOzD,KAAKsF,WAAWE,OAAS,C,CAO1B,SAAAR,CAAUzD,GAChB,GAAIvB,KAAKgB,QAAUgB,WAAahC,KAAKgB,QAAU,KAAMhB,KAAKgB,MAAQ,EAClE,UAAWhB,KAAKgB,QAAU,SAAU,CAClChB,KAAKgB,OAAShB,KAAKgB,OAAS,GAAK,EACjChB,KAAKoC,WAAWX,KAAKF,E","ignoreList":[]}