{"version":3,"file":"zane-sidenav-menu.entry.esm.js","sources":["src/components/application/sidenav/sidenav-menu/sidenav-menu.scss?tag=zane-sidenav-menu&encapsulation=shadow","src/components/application/sidenav/sidenav-menu/sidenav-menu.tsx"],"sourcesContent":["@use '../../../../global/styles/commons';\n\n:host {\n  --list-border-radius: var(--border-radius);\n  --zane-menu-max-height: inherit;\n\n  display: inline-block;\n}\n\n.menu {\n  box-sizing: border-box;\n  padding: var(--spacing-02) 0;\n  background-color: var(--field-02);\n  border: 1px solid commons.v(--color-neutral-200);\n  border-radius: var(--list-border-radius);\n  box-shadow: var(--shadow-sm);\n}\n","import {\n  Component,\n  ComponentInterface,\n  Element,\n  h,\n  Listen,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\n\n/**\n * 侧边导航菜单组件\n *\n * @Component 装饰器定义组件元数据\n * @shadow 启用Shadow DOM封装\n * @styleUrl 指定组件样式文件\n * @tag 定义组件在HTML中的标签名\n */\n@Component({\n  shadow: true,\n  styleUrl: 'sidenav-menu.scss',\n  tag: 'zane-sidenav-menu',\n})\nexport class SidenavMenu implements ComponentInterface {\n  /**\n   * 获取组件宿主元素引用\n   * @type {HTMLElement}\n   */\n  @Element() elm!: HTMLElement;\n\n  /**\n   * 是否显示空状态\n   * @type {boolean}\n   * @default false\n   * @mutable 可变的\n   */\n  @Prop({ mutable: true }) empty: boolean = false;\n\n  /**\n   * 空状态配置(JSON字符串格式)\n   * @type {string}\n   * @default '{\"headline\": \"No items\", \"description\": \"There are no items to display\"}'\n   * @mutable 可变的\n   */\n  @Prop({ mutable: true }) emptyState: any = `{\n    \"headline\": \"No items\",\n    \"description\": \"There are no items to display\"\n  }`;\n\n  /**\n   * 内部解析后的空状态对象\n   * @type {{description: string; title: string}}\n   * @State 组件内部状态\n   */\n  @State()\n  internalEmptyState: { description: string; title: string };\n\n  /**\n   * 是否显示加载指示器\n   * @type {boolean}\n   * @default false\n   */\n  @Prop() showLoader: boolean = false;\n\n  /**\n   * 组件值，可以是数字或字符串\n   * @type {number|string}\n   * @mutable 可变的\n   */\n  @Prop({ mutable: true }) value?: number | string;\n\n  /**\n   * 组件加载前生命周期钩子\n   * 用于初始化空状态\n   */\n  componentWillLoad() {\n    this.parseEmptyState();\n  }\n\n  /**\n   * 监听全局键盘事件\n   * @param {KeyboardEvent} evt - 键盘事件对象\n   * @Listen 装饰器监听window的keydown事件\n   */\n  @Listen('keydown', { target: 'window' })\n  handleKeyDown(evt: KeyboardEvent) {\n    const path = evt.composedPath();\n    let menuItem = null;\n    for (const elm of path) {\n      if ((elm as any).tagName === 'ZANE-MENU-ITEM') {\n        menuItem = elm;\n      }\n      if (elm !== this.elm) continue;\n      if (evt.key === 'ArrowDown') {\n        evt.preventDefault();\n        this.focusNextItem(menuItem);\n      } else if (evt.key === 'ArrowUp') {\n        evt.preventDefault();\n        this.focusPreviousItem(menuItem);\n      }\n    }\n  }\n\n  /**\n   * 解析空状态JSON字符串\n   * @Watch 监听emptyState属性变化\n   */\n  @Watch('emptyState')\n  parseEmptyState() {\n    this.internalEmptyState = this.emptyState\n      ? JSON.parse(this.emptyState)\n      : this.emptyState;\n  }\n\n  /**\n   * 渲染组件\n   * @returns {JSX.Element} 组件JSX结构\n   */\n  render() {\n    return (\n      <div class=\"menu\">\n        <slot />\n        {this.renderEmptyState()}\n      </div>\n    );\n  }\n\n  /**\n   * 公开方法：设置焦点到第一个菜单项\n   * @Method 装饰器定义公共API方法\n   * @returns {Promise<void>}\n   */\n  @Method()\n  async setFocus() {\n    const firstMenuItem = this.getFirstItem();\n    firstMenuItem?.setFocus();\n  }\n\n  /**\n   * 聚焦下一个菜单项\n   * @private 私有方法\n   * @param {HTMLElement} currentItem - 当前菜单项元素\n   */\n  private focusNextItem(currentItem) {\n    let nextItem: any = currentItem.nextElementSibling;\n    do {\n      if (\n        nextItem &&\n        nextItem.tagName === 'ZANE-MENU-ITEM' &&\n        !nextItem.disabled\n      ) {\n        nextItem.setFocus();\n        return;\n      }\n      nextItem = nextItem\n        ? nextItem.nextElementSibling\n        : this.elm.querySelector('zane-menu-item');\n    } while (nextItem !== currentItem);\n  }\n\n  /**\n   * 聚焦上一个菜单项\n   * @private 私有方法\n   * @param {HTMLElement} currentItem - 当前菜单项元素\n   */\n  private focusPreviousItem(currentItem) {\n    let previousItem: any = currentItem.previousElementSibling;\n    do {\n      if (\n        previousItem &&\n        previousItem.tagName === 'ZANE-MENU-ITEM' &&\n        !previousItem.disabled\n      ) {\n        previousItem.setFocus();\n        return;\n      }\n      previousItem = previousItem\n        ? previousItem.previousElementSibling\n        : this.elm.querySelector('zane-menu-item:last-child');\n    } while (previousItem !== currentItem);\n  }\n\n  /**\n   * 获取第一个菜单项\n   * @private 私有方法\n   * @returns {HTMLElement|null} 第一个菜单项元素或null\n   */\n  private getFirstItem() {\n    return this.elm.querySelector('zane-menu-item');\n  }\n\n  /**\n   * 渲染空状态\n   * @private 私有方法\n   * @returns {JSX.Element|null} 空状态JSX或null\n   */\n  private renderEmptyState() {\n    if (this.empty)\n      return (\n        <zane-empty-state class=\"empty-menu\">\n          <div slot=\"title\">{this.internalEmptyState.title}</div>\n          <div slot=\"description\">{this.internalEmptyState.description}</div>\n        </zane-empty-state>\n      );\n  }\n}\n"],"names":[],"mappings":"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"}