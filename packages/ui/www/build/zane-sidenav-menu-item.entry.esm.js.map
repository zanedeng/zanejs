{"version":3,"file":"zane-sidenav-menu-item.entry.esm.js","sources":["src/components/application/sidenav/sidenav-menu-item/sidenav-menu-item.scss?tag=zane-sidenav-menu-item&encapsulation=shadow","src/components/application/sidenav/sidenav-menu-item/sidenav-menu-item.tsx"],"sourcesContent":["@use '../../../../global/styles/commons';\n\n:host {\n  display: block;\n}\n\n.sidenav-menu-item {\n  box-sizing: border-box;\n  display: flex;\n  gap: var(--spacing-02);\n  align-items: center;\n  padding: var(--spacing-02) var(--spacing-04);\n  color: var(--text-secondary);\n  cursor: pointer;\n  outline: none;\n\n  @include commons.font-style(text-md);\n\n  .item-section {\n    display: flex;\n    align-items: center;\n  }\n\n  .slot-main {\n    display: block;\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .slot-end {\n    color: var(--text-helper);\n  }\n}\n\n.menu-item {\n  &:hover,\n  &.has-focus:not(.active) {\n    color: var(--text-primary);\n    background: var(--hover-ui);\n\n    .slot-end {\n      color: var(--icon-01);\n    }\n  }\n\n  &.active,\n  &.selected {\n    background: var(--selected-ui);\n  }\n}\n\n.menu-item.has-focus:not(.active) {\n  @include commons.focus-ring;\n}\n\n.menu-item.disabled {\n  color: var(--text-disabled) !important;\n  cursor: not-allowed;\n  background-color: var(--disabled-01) !important;\n\n  &:hover,\n  &.has-focus:not(.active) {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n\n  &.active,\n  &.selected {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n}\n\n.menu-item:not(.start-slot-has-content) {\n  .slot-start {\n    display: none;\n  }\n}\n\n.menu-item:not(.end-slot-has-content) {\n  .slot-end {\n    display: none;\n  }\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n} from '@stencil/core';\n\nimport { getComponentIndex } from '../../../../utils';\n\n/**\n * 侧边导航菜单项组件\n *\n * @Component 装饰器定义组件元数据\n * @shadow 启用Shadow DOM封装\n * @styleUrl 指定组件样式文件\n * @tag 定义组件在HTML中的标签名\n */\n@Component({\n  shadow: true,\n  styleUrl: 'sidenav-menu-item.scss',\n  tag: 'zane-sidenav-menu-item',\n})\nexport class SidenavMenuItem {\n\n  /**\n   * 是否禁用菜单项\n   * @type {boolean}\n   * @default false\n   * @reflect 属性值会反射到DOM属性\n   */\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  /**\n   * 获取组件宿主元素引用\n   * @type {HTMLElement}\n   */\n  @Element() elm!: HTMLElement;\n\n  /**\n   * 右侧插槽是否有内容\n   * @type {boolean}\n   * @State 内部状态变化会触发重新渲染\n   */\n  @State() endSlotHasContent = false;\n\n  /**\n   * 组件唯一标识符\n   * @type {string}\n   */\n  gid: string = getComponentIndex();\n\n  /**\n   * 是否获得焦点状态\n   * @type {boolean}\n   */\n  @State() hasFocus = false;\n\n  /**\n   * 激活状态(鼠标/键盘交互时)\n   * @type {boolean}\n   */\n  @State() isActive = false;\n\n  /**\n   * 选中状态\n   * @type {boolean}\n   * @default false\n   * @reflect 属性值会反射到DOM属性\n   */\n  @Prop({ reflect: true }) selected: boolean = false;\n\n  /**\n   * 左侧插槽是否有内容\n   * @type {boolean}\n   */\n  @State() startSlotHasContent = false;\n\n  /**\n   * 菜单项值，支持null/数字/字符串类型\n   * @type {null|number|string}\n   * @mutable 可变的\n   */\n  @Prop({ mutable: true }) value?: null | number | string;\n\n  /**\n   * 菜单项点击事件\n   * @type {EventEmitter}\n   * @event zane:sidenav-menu-item-click\n   */\n  @Event({ eventName: 'zane:sidenav-menu-item-click' })\n  zaneMenuItemClick: EventEmitter;\n\n  private nativeElement?: HTMLElement;\n\n  private tabindex?: number | string = 1;\n\n  /**\n   * 组件加载前生命周期\n   * 初始化tabindex和插槽状态\n   */\n  componentWillLoad() {\n    if (this.elm.hasAttribute('tabindex')) {\n      const tabindex = this.elm.getAttribute('tabindex');\n      this.tabindex = tabindex === null ? undefined : tabindex;\n      this.elm.removeAttribute('tabindex');\n    }\n    this.startSlotHasContent = !!this.elm.querySelector('[slot=\"start\"]');\n    this.endSlotHasContent = !!this.elm.querySelector('[slot=\"end\"]');\n  }\n\n  /**\n   * 渲染组件\n   * @returns {JSX.Element} 组件JSX结构\n   */\n  render = () => {\n    return (\n      <Host active={this.isActive} has-focus={this.hasFocus}>\n        <div\n          aria-disabled={this.disabled}\n          class={{\n            active: this.isActive,\n            disabled: this.disabled,\n            'end-slot-has-content': this.endSlotHasContent,\n            'has-focus': this.hasFocus,\n            selected: this.selected,\n            'sidenav-menu-item': true,\n            'start-slot-has-content': this.startSlotHasContent,\n          }}\n          onBlur={this.blurHandler}\n          onClick={this.clickHandler}\n          onFocus={this.focusHandler}\n          onKeyDown={this.keyDownHandler}\n          onMouseDown={this.mouseDownHandler}\n          ref={(el) => (this.nativeElement = el as HTMLElement)}\n          tabindex={this.tabindex}\n        >\n          <div class=\"item-section slot-start\">\n            <slot name=\"start\" />\n          </div>\n\n          <div class=\"item-section slot-main\">\n            <slot />\n          </div>\n\n          <div class=\"item-section slot-end\">\n            <slot name=\"end\" />\n          </div>\n        </div>\n      </Host>\n    );\n  };\n\n  /**\n   * 移除焦点\n   * @Method 装饰器定义公共API方法\n   * @returns {Promise<void>}\n   */\n  @Method()\n  async setBlur() {\n    if (this.nativeElement) {\n      this.nativeElement.blur();\n    }\n  }\n\n  /**\n   * 设置焦点\n   * @Method 装饰器定义公共API方法\n   * @returns {Promise<void>}\n   */\n  @Method()\n  async setFocus() {\n    if (this.nativeElement) {\n      this.nativeElement.focus();\n    }\n  }\n\n  /**\n   * 监听全局键盘释放事件\n   * @param {KeyboardEvent} evt 键盘事件对象\n   */\n  @Listen('keyup', { target: 'window' })\n  windowKeyUp(evt) {\n    if (this.isActive && evt.key === ' ') this.isActive = false;\n  }\n\n  /**\n   * 监听全局鼠标释放事件\n   */\n  @Listen('mouseup', { target: 'window' })\n  windowMouseUp() {\n    if (this.isActive) this.isActive = false;\n  }\n\n  private blurHandler = () => {\n    this.hasFocus = false;\n  };\n\n  private clickHandler = (event) => {\n    if (this.disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      this.zaneMenuItemClick.emit({\n        value: this.value || this.elm.innerText,\n      });\n    }\n  };\n\n  private focusHandler = () => {\n    this.hasFocus = true;\n  };\n\n  private keyDownHandler = (evt) => {\n    if (evt.key === ' ') {\n      evt.preventDefault();\n      this.isActive = true;\n      this.clickHandler(evt);\n    }\n  };\n\n  private mouseDownHandler = () => {\n    this.isActive = true;\n  };\n}\n"],"names":[],"mappings":"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"}