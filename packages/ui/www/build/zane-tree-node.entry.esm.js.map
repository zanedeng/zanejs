{"version":3,"file":"zane-tree-node.entry.esm.js","sources":["src/components/tree/tree-node/tree-node.scss?tag=zane-tree-node&encapsulation=shadow","src/components/tree/tree-node/tree-node.tsx"],"sourcesContent":["@use \"../../../global/styles/commons\";\n\n:host {\n  display: block;\n}\n\n.tree-node-content {\n  cursor: pointer;\n  height: 2rem;\n  padding-inline-end: calc(commons.v(--spacing-05) - 0.125rem);\n  box-sizing: border-box;\n  outline: none;\n  display: flex;\n  align-items: center;\n  position: relative;\n  border: 0.125rem solid transparent;\n\n  .tree-node-label {\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    padding-left: .5rem;\n    color: commons.v(--text-secondary);\n    @include commons.font-style(body-compact-01);\n  }\n\n  .expand-icon {\n    transform: rotate(0deg);\n    transition: all .11s cubic-bezier(.2, 0, .38, .9);\n  }\n\n  .expand-icon.expanded {\n    transform: rotate(+90deg);\n  }\n\n  .icon-space {\n    width: commons.v(--spacing-05);\n  }\n\n  .icon {\n    padding-inline-start: .5rem;\n  }\n}\n\n.node-slot {\n  display: none;\n}\n\n.node-slot.expanded {\n  display: block;\n}\n\n.tree-node-content {\n  text-decoration: none !important;\n\n  &:hover {\n    background: commons.v(--layer-hover);\n\n    &.selected {\n      background: var(--layer-selected-hover);\n    }\n  }\n\n  &.has-focus:not(.selected) {\n    color: var(--text-primary);\n    border-color: commons.v(--color-primary);\n\n    .slot-end {\n      color: var(--icon-01);\n    }\n  }\n\n  &.selected {\n    background: var(--layer-selected);\n    font-weight: var(--font-weight-semi-bold);\n    border-left: 0.125rem solid transparent;\n  }\n\n\n  &.selected::before {\n    content: \" \";\n    display: block;\n    height: calc(100% + 0.25rem);\n    border-left: 0.25rem solid var(--color-primary, commons.v(--color-blue-60)) !important;\n    position: absolute;\n    top: -0.125rem;\n    left: -0.125rem;\n  }\n\n}\n\n.tree-node-content.disabled {\n  cursor: not-allowed;\n  color: var(--text-disabled) !important;\n  background-color: var(--disabled-01) !important;\n\n  &:hover, &.has-focus:not(.selected) {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n\n  &.selected {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n} from '@stencil/core';\n\nimport { getComponentIndex } from '../../../utils';\n\n/**\n * @name TreeNode\n * @description A tree node is a hierarchical structure that provides nested levels of navigation.\n * @category Navigation\n * @subcategory Tree View\n * @childComponent true\n * @img /assets/img/tree-view.webp\n * @imgDark /assets/img/tree-view-dark.webp\n */\n@Component({\n  shadow: true,\n  styleUrl: 'tree-node.scss',\n  tag: 'zane-tree-node',\n})\nexport class TreeNode {\n  /**\n   * If true, the user cannot interact with the button. Defaults to `false`.\n   */\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  @Element() elm!: HTMLElement;\n\n  @Prop({ mutable: true, reflect: true }) expanded: boolean = true;\n\n  gid: string = getComponentIndex();\n\n  @State() hasChildNodes = false;\n\n  @State() hasFocus = false;\n\n  /**\n   * Hyperlink to navigate to on click.\n   */\n  @Prop({ reflect: true }) href: string;\n\n  /**\n   * Icon which will displayed on button.\n   * Possible values are icon names.\n   */\n  @Prop() icon: string;\n\n  @State() isActive = false;\n\n  @Prop({ mutable: true }) label: string = '';\n\n  @Prop({ reflect: true }) level: number = 0;\n\n  /**\n   * Menu item selection state.\n   */\n  @Prop({ mutable: true, reflect: true }) selectedNode: string;\n\n  /**\n   * Sets or retrieves the window or frame at which to target content.\n   */\n  @Prop() target: string = '_self';\n\n  /**\n   * The menu item value.\n   */\n  @Prop({ mutable: true }) value?: null | number | string;\n\n  /**\n   * Emitted when the menu item is clicked.\n   */\n  @Event({ eventName: 'zane-tree-node--click' })\n  zaneTreeNodeClick: EventEmitter;\n\n  private nativeElement?: HTMLElement;\n\n  private tabindex?: number | string = 1;\n\n  componentWillLoad() {\n    // If the ion-input has a tabindex attribute we get the value\n    // and pass it down to the native input, then remove it from the\n    // zane-input to avoid causing tabbing twice on the same element\n    if (this.elm.hasAttribute('tabindex')) {\n      const tabindex = this.elm.getAttribute('tabindex');\n      this.tabindex = tabindex === null ? undefined : tabindex;\n      this.elm.removeAttribute('tabindex');\n    }\n\n    const treeView = this.elm.closest('zane-tree-view');\n\n    (treeView as any).getSelectedNode().then((selectedNode: string) => {\n      this.selectedNode = selectedNode;\n    });\n\n    (treeView as any).subscribeToSelect((selectedNode: string) => {\n      this.selectedNode = selectedNode;\n    });\n\n    const childNodes = this.elm.querySelectorAll('zane-tree-node');\n    this.hasChildNodes = childNodes.length > 0;\n    childNodes.forEach((node: any) => {\n      node.level = this.level + 1;\n    });\n  }\n\n  handleClick = () => {\n    this.zaneTreeNodeClick.emit({\n      expand: this.expanded,\n      id: this.gid,\n      value: this.value || this.label,\n    });\n  };\n  isSelected() {\n    if (this.value === undefined && this.label === undefined) return false;\n    else if (this.value === undefined) return this.selectedNode === this.label;\n    else return this.selectedNode === this.value;\n  }\n  render = () => {\n    const NativeElementTag = this.#getNativeElementTagName();\n    const styles = {\n      paddingInlineStart: `calc(${this.level + 1}rem - 0.125rem)`,\n    };\n\n    return (\n      <Host active={this.isActive} has-focus={this.hasFocus}>\n        <div class=\"tree-node\">\n          <NativeElementTag\n            aria-disabled={this.disabled}\n            class={{\n              active: this.isActive,\n              disabled: this.disabled,\n              'has-focus': this.hasFocus,\n              selected: this.isSelected(),\n              'tree-node-content': true,\n            }}\n            href={this.href}\n            onBlur={this.blurHandler}\n            onClick={this.clickHandler}\n            onFocus={this.focusHandler}\n            onKeyDown={this.keyDownHandler}\n            onMouseDown={this.mouseDownHandler}\n            ref={(el) => (this.nativeElement = el as HTMLElement)}\n            style={styles}\n            tabindex={this.tabindex}\n            target={this.target}\n          >\n            {this.hasChildNodes && (\n              <zane-icon\n                class={{ 'expand-icon': true, expanded: this.expanded }}\n                name=\"caret--right\"\n                size=\"1rem\"\n              />\n            )}\n\n            {!this.hasChildNodes && <div class=\"icon-space\" />}\n\n            {this.icon && (\n              <zane-icon class={'icon'} name={this.icon} size=\"1rem\" />\n            )}\n\n            <span class=\"tree-node-label\">{this.label}</span>\n          </NativeElementTag>\n\n          <div\n            class={{\n              expanded: this.expanded,\n              'node-slot': true,\n            }}\n          >\n            <slot></slot>\n          </div>\n        </div>\n      </Host>\n    );\n  };\n\n  /**\n   * Sets blur on the native `input` in `zane-input`. Use this method instead of the global\n   * `input.blur()`.\n   */\n  @Method()\n  async setBlur() {\n    if (this.nativeElement) {\n      this.nativeElement.blur();\n    }\n  }\n\n  /**\n   * Sets focus on the native `input` in `zane-input`. Use this method instead of the global\n   * `input.focus()`.\n   */\n  @Method()\n  async setFocus() {\n    if (this.nativeElement) {\n      this.nativeElement.focus();\n    }\n  }\n\n  @Listen('keyup', { target: 'window' })\n  windowKeyUp(evt) {\n    if (this.isActive && evt.key === ' ') this.isActive = false;\n  }\n\n  @Listen('mouseup', { target: 'window' })\n  windowMouseUp() {\n    if (this.isActive) this.isActive = false;\n  }\n\n  #getNativeElementTagName() {\n    return this.href ? 'a' : 'div';\n  }\n\n  private blurHandler = () => {\n    this.hasFocus = false;\n  };\n\n  private clickHandler = (event) => {\n    if (this.disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      this.expanded = !this.expanded;\n      this.handleClick();\n    }\n  };\n\n  private focusHandler = () => {\n    this.hasFocus = true;\n  };\n\n  private keyDownHandler = (evt) => {\n    switch (evt.key) {\n      case ' ':\n      case 'Enter': {\n        if (this.hasChildNodes) {\n          evt.preventDefault();\n          this.clickHandler(evt);\n        } else if (this.href) {\n          evt.preventDefault();\n          this.isActive = true;\n          this.handleClick();\n          window.open(this.href, this.target);\n        } else {\n          evt.preventDefault();\n          this.isActive = true;\n          this.handleClick();\n        }\n\n        break;\n      }\n      case 'ArrowLeft': {\n        evt.preventDefault();\n        this.expanded = false;\n\n        break;\n      }\n      case 'ArrowRight': {\n        evt.preventDefault();\n        if (this.expanded && this.hasChildNodes) {\n          const childNodes = this.elm.querySelectorAll('zane-tree-node');\n          if (childNodes.length > 0) {\n            const firstChild = childNodes[0] as any;\n            firstChild.setFocus();\n          }\n        } else {\n          this.expanded = true;\n        }\n\n        break;\n      }\n      // No default\n    }\n  };\n\n  private mouseDownHandler = () => {\n    this.isActive = true;\n  };\n}\n"],"names":[],"mappings":"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"}