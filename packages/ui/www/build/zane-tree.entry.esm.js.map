{"version":3,"file":"zane-tree.entry.esm.js","sources":["src/components/tree/tree/tree.scss?tag=zane-tree&encapsulation=shadow","src/components/tree/tree/tree.tsx"],"sourcesContent":["@use '../../../global/styles/commons';\n\n:host {\n  display: block;\n}\n\n.tree-view {\n  background-color: var(--layer);\n}\n","import {\n  Component,\n  ComponentInterface,\n  Element,\n  h,\n  Listen,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\n\n/**\n * @name Tree\n * @description A tree view is a hierarchical structure that provides nested levels of navigation.\n * @category Navigation\n * @subcategory Tree View\n * @img /assets/img/tree-view.webp\n * @imgDark /assets/img/tree-view-dark.webp\n */\n@Component({\n  shadow: true,\n  styleUrl: 'tree.scss',\n  tag: 'zane-tree',\n})\nexport class Tree implements ComponentInterface {\n  @Element() elm!: HTMLElement;\n\n  @Prop({ mutable: true }) empty: boolean = false;\n\n  @Prop({ mutable: true }) emptyState: string = `{\n    \"headline\": \"No items\",\n    \"description\": \"There are no items to display\"\n  }`;\n\n  @State()\n  internalEmptyState: any;\n\n  @Prop({ mutable: true })\n  selectedNode: string;\n\n  subscribers: any[] = [];\n\n  componentWillLoad() {\n    this.parseEmptyState();\n  }\n\n  @Method()\n  async getSelectedNode() {\n    return this.selectedNode;\n  }\n\n  @Listen('keydown', { target: 'window' })\n  handleKeyDown(evt: KeyboardEvent) {\n    const path = evt.composedPath();\n    let menuItem = null;\n    for (const elm of path) {\n      if ((elm as any).tagName === 'ZANE-TREE-NODE') {\n        menuItem = elm;\n      }\n      if (elm !== this.elm) continue;\n      if (evt.key === 'ArrowDown') {\n        evt.preventDefault();\n        this.focusNextItem(menuItem);\n      } else if (evt.key === 'ArrowUp') {\n        evt.preventDefault();\n        this.focusPreviousItem(menuItem);\n      }\n    }\n  }\n\n  @Watch('emptyState')\n  parseEmptyState() {\n    this.internalEmptyState =\n      typeof this.emptyState === 'string'\n        ? JSON.parse(this.emptyState)\n        : this.emptyState;\n  }\n\n  render() {\n    return this.empty ? (\n      <div class=\"tree-view\">{this.renderEmptyState()}</div>\n    ) : (\n      <div class=\"tree-view\">\n        <slot></slot>\n      </div>\n    );\n  }\n\n  /**\n   * Sets focus on first menu item. Use this method instead of the global\n   * `element.focus()`.\n   */\n  @Method()\n  async setFocus() {\n    const firstMenuItem = this.getFirstItem();\n    (firstMenuItem as any)?.setFocus();\n  }\n\n  @Method()\n  async subscribeToSelect(cb) {\n    this.subscribers.push(cb);\n  }\n\n  @Listen('zane-tree-node--click')\n  treeNodeClick(evt: CustomEvent<any>) {\n    this.selectedNode = evt.detail.value;\n    this.subscribers.forEach((cb) => cb(evt.detail.value));\n  }\n\n  private focusNextItem(currentItem) {\n    let nextItem: any = currentItem.nextElementSibling;\n    do {\n      if (\n        nextItem &&\n        nextItem.tagName === 'ZANE-TREE-NODE' &&\n        !nextItem.disabled\n      ) {\n        nextItem.setFocus();\n        return;\n      }\n      nextItem = nextItem\n        ? nextItem.nextElementSibling\n        : this.elm.querySelector('zane-tree-node:first-child');\n    } while (nextItem !== currentItem);\n  }\n\n  private focusPreviousItem(currentItem) {\n    let previousItem: any = currentItem.previousElementSibling;\n    do {\n      if (\n        previousItem &&\n        previousItem.tagName === 'ZANE-TREE-NODE' &&\n        !previousItem.disabled\n      ) {\n        previousItem.setFocus();\n        return;\n      }\n      previousItem = previousItem\n        ? previousItem.previousElementSibling\n        : this.elm.querySelector('zane-tree-node:last-child');\n    } while (previousItem !== currentItem);\n  }\n\n  private getFirstItem() {\n    return this.elm.querySelector('zane-menu-item');\n  }\n\n  private renderEmptyState() {\n    if (this.empty)\n      return (\n        <zane-empty-state class=\"empty-menu\" {...this.internalEmptyState} />\n      );\n  }\n}\n"],"names":[],"mappings":"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"}