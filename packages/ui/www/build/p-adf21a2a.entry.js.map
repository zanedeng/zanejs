{"version":3,"names":["sidenavMenuItemCss","SidenavMenuItem","constructor","hostRef","this","disabled","endSlotHasContent","gid","getComponentIndex","hasFocus","isActive","selected","startSlotHasContent","tabindex","render","h","Host","active","class","onBlur","blurHandler","onClick","clickHandler","onFocus","focusHandler","onKeyDown","keyDownHandler","onMouseDown","mouseDownHandler","ref","el","nativeElement","name","event","preventDefault","stopPropagation","zaneMenuItemClick","emit","value","elm","innerText","evt","key","componentWillLoad","hasAttribute","getAttribute","undefined","removeAttribute","querySelector","setBlur","blur","setFocus","focus","windowKeyUp","windowMouseUp"],"sources":["src/components/application/sidenav/sidenav-menu-item/sidenav-menu-item.scss?tag=zane-sidenav-menu-item&encapsulation=shadow","src/components/application/sidenav/sidenav-menu-item/sidenav-menu-item.tsx"],"sourcesContent":["@use '../../../../global/styles/commons';\n\n:host {\n  display: block;\n}\n\n.sidenav-menu-item {\n  box-sizing: border-box;\n  display: flex;\n  gap: var(--spacing-02);\n  align-items: center;\n  padding: var(--spacing-02) var(--spacing-04);\n  color: var(--text-secondary);\n  cursor: pointer;\n  outline: none;\n\n  @include commons.font-style(text-md);\n\n  .item-section {\n    display: flex;\n    align-items: center;\n  }\n\n  .slot-main {\n    display: block;\n    flex: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .slot-end {\n    color: var(--text-helper);\n  }\n}\n\n.menu-item {\n  &:hover,\n  &.has-focus:not(.active) {\n    color: var(--text-primary);\n    background: var(--hover-ui);\n\n    .slot-end {\n      color: var(--icon-01);\n    }\n  }\n\n  &.active,\n  &.selected {\n    background: var(--selected-ui);\n  }\n}\n\n.menu-item.has-focus:not(.active) {\n  @include commons.focus-ring;\n}\n\n.menu-item.disabled {\n  color: var(--text-disabled) !important;\n  cursor: not-allowed;\n  background-color: var(--disabled-01) !important;\n\n  &:hover,\n  &.has-focus:not(.active) {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n\n  &.active,\n  &.selected {\n    color: var(--text-disabled) !important;\n    background-color: var(--disabled-01) !important;\n  }\n}\n\n.menu-item:not(.start-slot-has-content) {\n  .slot-start {\n    display: none;\n  }\n}\n\n.menu-item:not(.end-slot-has-content) {\n  .slot-end {\n    display: none;\n  }\n}\n","import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Listen,\n  Method,\n  Prop,\n  State,\n} from '@stencil/core';\n\nimport { getComponentIndex } from '../../../../utils';\n\n/**\n * 侧边导航菜单项组件\n *\n * @Component 装饰器定义组件元数据\n * @shadow 启用Shadow DOM封装\n * @styleUrl 指定组件样式文件\n * @tag 定义组件在HTML中的标签名\n */\n@Component({\n  shadow: true,\n  styleUrl: 'sidenav-menu-item.scss',\n  tag: 'zane-sidenav-menu-item',\n})\nexport class SidenavMenuItem {\n\n  /**\n   * 是否禁用菜单项\n   * @type {boolean}\n   * @default false\n   * @reflect 属性值会反射到DOM属性\n   */\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  /**\n   * 获取组件宿主元素引用\n   * @type {HTMLElement}\n   */\n  @Element() elm!: HTMLElement;\n\n  /**\n   * 右侧插槽是否有内容\n   * @type {boolean}\n   * @State 内部状态变化会触发重新渲染\n   */\n  @State() endSlotHasContent = false;\n\n  /**\n   * 组件唯一标识符\n   * @type {string}\n   */\n  gid: string = getComponentIndex();\n\n  /**\n   * 是否获得焦点状态\n   * @type {boolean}\n   */\n  @State() hasFocus = false;\n\n  /**\n   * 激活状态(鼠标/键盘交互时)\n   * @type {boolean}\n   */\n  @State() isActive = false;\n\n  /**\n   * 选中状态\n   * @type {boolean}\n   * @default false\n   * @reflect 属性值会反射到DOM属性\n   */\n  @Prop({ reflect: true }) selected: boolean = false;\n\n  /**\n   * 左侧插槽是否有内容\n   * @type {boolean}\n   */\n  @State() startSlotHasContent = false;\n\n  /**\n   * 菜单项值，支持null/数字/字符串类型\n   * @type {null|number|string}\n   * @mutable 可变的\n   */\n  @Prop({ mutable: true }) value?: null | number | string;\n\n  /**\n   * 菜单项点击事件\n   * @type {EventEmitter}\n   * @event zane:sidenav-menu-item-click\n   */\n  @Event({ eventName: 'zane:sidenav-menu-item-click' })\n  zaneMenuItemClick: EventEmitter;\n\n  private nativeElement?: HTMLElement;\n\n  private tabindex?: number | string = 1;\n\n  /**\n   * 组件加载前生命周期\n   * 初始化tabindex和插槽状态\n   */\n  componentWillLoad() {\n    if (this.elm.hasAttribute('tabindex')) {\n      const tabindex = this.elm.getAttribute('tabindex');\n      this.tabindex = tabindex === null ? undefined : tabindex;\n      this.elm.removeAttribute('tabindex');\n    }\n    this.startSlotHasContent = !!this.elm.querySelector('[slot=\"start\"]');\n    this.endSlotHasContent = !!this.elm.querySelector('[slot=\"end\"]');\n  }\n\n  /**\n   * 渲染组件\n   * @returns {JSX.Element} 组件JSX结构\n   */\n  render = () => {\n    return (\n      <Host active={this.isActive} has-focus={this.hasFocus}>\n        <div\n          aria-disabled={this.disabled}\n          class={{\n            active: this.isActive,\n            disabled: this.disabled,\n            'end-slot-has-content': this.endSlotHasContent,\n            'has-focus': this.hasFocus,\n            selected: this.selected,\n            'sidenav-menu-item': true,\n            'start-slot-has-content': this.startSlotHasContent,\n          }}\n          onBlur={this.blurHandler}\n          onClick={this.clickHandler}\n          onFocus={this.focusHandler}\n          onKeyDown={this.keyDownHandler}\n          onMouseDown={this.mouseDownHandler}\n          ref={(el) => (this.nativeElement = el as HTMLElement)}\n          tabindex={this.tabindex}\n        >\n          <div class=\"item-section slot-start\">\n            <slot name=\"start\" />\n          </div>\n\n          <div class=\"item-section slot-main\">\n            <slot />\n          </div>\n\n          <div class=\"item-section slot-end\">\n            <slot name=\"end\" />\n          </div>\n        </div>\n      </Host>\n    );\n  };\n\n  /**\n   * 移除焦点\n   * @Method 装饰器定义公共API方法\n   * @returns {Promise<void>}\n   */\n  @Method()\n  async setBlur() {\n    if (this.nativeElement) {\n      this.nativeElement.blur();\n    }\n  }\n\n  /**\n   * 设置焦点\n   * @Method 装饰器定义公共API方法\n   * @returns {Promise<void>}\n   */\n  @Method()\n  async setFocus() {\n    if (this.nativeElement) {\n      this.nativeElement.focus();\n    }\n  }\n\n  /**\n   * 监听全局键盘释放事件\n   * @param {KeyboardEvent} evt 键盘事件对象\n   */\n  @Listen('keyup', { target: 'window' })\n  windowKeyUp(evt) {\n    if (this.isActive && evt.key === ' ') this.isActive = false;\n  }\n\n  /**\n   * 监听全局鼠标释放事件\n   */\n  @Listen('mouseup', { target: 'window' })\n  windowMouseUp() {\n    if (this.isActive) this.isActive = false;\n  }\n\n  private blurHandler = () => {\n    this.hasFocus = false;\n  };\n\n  private clickHandler = (event) => {\n    if (this.disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n    } else {\n      this.zaneMenuItemClick.emit({\n        value: this.value || this.elm.innerText,\n      });\n    }\n  };\n\n  private focusHandler = () => {\n    this.hasFocus = true;\n  };\n\n  private keyDownHandler = (evt) => {\n    if (evt.key === ' ') {\n      evt.preventDefault();\n      this.isActive = true;\n      this.clickHandler(evt);\n    }\n  };\n\n  private mouseDownHandler = () => {\n    this.isActive = true;\n  };\n}\n"],"mappings":"oJAAA,MAAMA,EAAqB,o1I,MC4BdC,EAAe,MAL5B,WAAAC,CAAAC,G,wEAa2BC,KAAQC,SAAY,MAapCD,KAAiBE,kBAAG,MAM7BF,KAAGG,IAAWC,IAMLJ,KAAQK,SAAG,MAMXL,KAAQM,SAAG,MAQKN,KAAQO,SAAY,MAMpCP,KAAmBQ,oBAAG,MAmBvBR,KAAQS,SAAqB,EAoBrCT,KAAMU,OAAG,IAELC,EAACC,EAAI,CAACC,OAAQb,KAAKM,SAAQ,YAAaN,KAAKK,UAC3CM,EAAA,uBACiBX,KAAKC,SACpBa,MAAO,CACLD,OAAQb,KAAKM,SACbL,SAAUD,KAAKC,SACf,uBAAwBD,KAAKE,kBAC7B,YAAaF,KAAKK,SAClBE,SAAUP,KAAKO,SACf,oBAAqB,KACrB,yBAA0BP,KAAKQ,qBAEjCO,OAAQf,KAAKgB,YACbC,QAASjB,KAAKkB,aACdC,QAASnB,KAAKoB,aACdC,UAAWrB,KAAKsB,eAChBC,YAAavB,KAAKwB,iBAClBC,IAAMC,GAAQ1B,KAAK2B,cAAgBD,EACnCjB,SAAUT,KAAKS,UAEfE,EAAK,OAAAG,MAAM,2BACTH,EAAA,QAAMiB,KAAK,WAGbjB,EAAK,OAAAG,MAAM,0BACTH,EAAA,cAGFA,EAAK,OAAAG,MAAM,yBACTH,EAAM,QAAAiB,KAAK,WAgDb5B,KAAWgB,YAAG,KACpBhB,KAAKK,SAAW,KAAK,EAGfL,KAAAkB,aAAgBW,IACtB,GAAI7B,KAAKC,SAAU,CACjB4B,EAAMC,iBACND,EAAME,iB,KACD,CACL/B,KAAKgC,kBAAkBC,KAAK,CAC1BC,MAAOlC,KAAKkC,OAASlC,KAAKmC,IAAIC,W,GAK5BpC,KAAYoB,aAAG,KACrBpB,KAAKK,SAAW,IAAI,EAGdL,KAAAsB,eAAkBe,IACxB,GAAIA,EAAIC,MAAQ,IAAK,CACnBD,EAAIP,iBACJ9B,KAAKM,SAAW,KAChBN,KAAKkB,aAAamB,E,GAIdrC,KAAgBwB,iBAAG,KACzBxB,KAAKM,SAAW,IAAI,CAEvB,CA3HC,iBAAAiC,GACE,GAAIvC,KAAKmC,IAAIK,aAAa,YAAa,CACrC,MAAM/B,EAAWT,KAAKmC,IAAIM,aAAa,YACvCzC,KAAKS,SAAWA,IAAa,KAAOiC,UAAYjC,EAChDT,KAAKmC,IAAIQ,gBAAgB,W,CAE3B3C,KAAKQ,sBAAwBR,KAAKmC,IAAIS,cAAc,kBACpD5C,KAAKE,oBAAsBF,KAAKmC,IAAIS,cAAc,e,CAmDpD,aAAMC,GACJ,GAAI7C,KAAK2B,cAAe,CACtB3B,KAAK2B,cAAcmB,M,EAUvB,cAAMC,GACJ,GAAI/C,KAAK2B,cAAe,CACtB3B,KAAK2B,cAAcqB,O,EASvB,WAAAC,CAAYZ,GACV,GAAIrC,KAAKM,UAAY+B,EAAIC,MAAQ,IAAKtC,KAAKM,SAAW,K,CAOxD,aAAA4C,GACE,GAAIlD,KAAKM,SAAUN,KAAKM,SAAW,K","ignoreList":[]}